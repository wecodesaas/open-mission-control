{
  "task_description": "Task stuck after spec creation with 'Require human review before coding' enabled - no way to approve",
  "scoped_services": ["frontend", "backend"],
  "files_to_modify": {
    "frontend": [
      "apps/frontend/src/renderer/stores/task-store.ts",
      "apps/frontend/src/renderer/components/task-detail/TaskActions.tsx",
      "apps/frontend/src/shared/types/ipc.ts"
    ],
    "backend": [
      "apps/backend/spec/pipeline/orchestrator.py",
      "apps/backend/runners/spec_runner.py",
      "apps/frontend/src/main/project-store.ts"
    ]
  },
  "files_to_reference": [
    "apps/frontend/src/renderer/components/ui/dialog.tsx",
    "apps/frontend/src/renderer/components/task-detail/task-review/DiffViewDialog.tsx",
    "apps/frontend/src/renderer/stores/settings-store.ts",
    "apps/frontend/src/renderer/components/task-detail/TaskDetailModal.tsx"
  ],
  "patterns": {
    "zustand_store": "Use create() from zustand, define interface with state and actions, export async functions for IPC calls",
    "radix_dialog": "Use Dialog, DialogContent, DialogHeader, DialogTitle from ui/dialog.tsx, apply Tailwind classes for styling",
    "ipc_pattern": "Define IPC handlers in electronAPI interface, implement in main process, call from renderer via window.electronAPI",
    "task_status_flow": "Tasks use status='human_review' with reviewReason='plan_review' when awaiting spec approval"
  },
  "existing_implementations": {
    "description": "Found existing task review patterns in task-detail/task-review/ showing how to handle human_review states with diff viewing and approval actions",
    "relevant_files": [
      "apps/frontend/src/renderer/components/task-detail/task-review/index.ts",
      "apps/frontend/src/renderer/components/task-detail/task-review/WorkspaceStatus.tsx",
      "apps/frontend/src/shared/types/task.ts"
    ],
    "key_insight": "ReviewReason type already includes 'plan_review' but it's not being set anywhere. Tasks should transition to status='human_review' with reviewReason='plan_review' after spec creation when requireReviewBeforeCoding is enabled."
  },
  "created_at": "2025-12-26T07:14:00.000000"
}
